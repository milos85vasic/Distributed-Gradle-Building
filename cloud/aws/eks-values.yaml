# AWS EKS optimized values for Distributed Gradle Building
global:
  namespace: distributed-gradle
  environment: production
  registry: your-registry.com
  imageTag: latest

# AWS-specific storage classes
cache:
  enabled: true
  replicas: 2
  image:
    repository: distributed-gradle-cache
    tag: ""
    pullPolicy: IfNotPresent
  port: 8083
  env:
    CACHE_PORT: "8083"
    LOG_LEVEL: "info"
    MAX_CACHE_SIZE: "50GB"
    GIN_MODE: "release"
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  persistence:
    data:
      enabled: true
      size: 100Gi
      storageClass: ebs-gp3
    logs:
      enabled: true
      size: 20Gi
      storageClass: ebs-gp3

coordinator:
  enabled: true
  replicas: 2
  image:
    repository: distributed-gradle-coordinator
    tag: ""
    pullPolicy: IfNotPresent
  port: 8080
  env:
    COORDINATOR_PORT: "8080"
    LOG_LEVEL: "info"
    GIN_MODE: "release"
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

monitor:
  enabled: true
  replicas: 1
  image:
    repository: distributed-gradle-monitor
    tag: ""
    pullPolicy: IfNotPresent
  port: 8082
  env:
    MONITOR_PORT: "8082"
    LOG_LEVEL: "info"
    GIN_MODE: "release"
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

worker:
  enabled: true
  replicas: 5
  image:
    repository: distributed-gradle-worker
    tag: ""
    pullPolicy: IfNotPresent
  port: 8081
  env:
    WORKER_PORT: "8081"
    LOG_LEVEL: "info"
    GIN_MODE: "release"
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# AWS optimized monitoring
monitoring:
  prometheus:
    enabled: true
    scrapeInterval: "30s"
    evaluationInterval: "30s"
    alertmanagers:
      - "alertmanager.monitoring.svc.cluster.local:9093"
  grafana:
    enabled: true

# AWS ALB Ingress
ingress:
  enabled: true
  className: "alb"
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/healthcheck-path: "/health"
    alb.ingress.kubernetes.io/healthcheck-port: "traffic-port"
    alb.ingress.kubernetes.io/healthcheck-protocol: "HTTP"
    alb.ingress.kubernetes.io/healthcheck-interval-seconds: "30"
    alb.ingress.kubernetes.io/healthcheck-timeout-seconds: "5"
    alb.ingress.kubernetes.io/healthy-threshold-count: "2"
    alb.ingress.kubernetes.io/unhealthy-threshold-count: "2"
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/certificate-arn: "arn:aws:acm:region:account:certificate/certificate-id"
    external-dns.alpha.kubernetes.io/hostname: "gradle.yourdomain.com"
  hosts:
    - host: gradle.yourdomain.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: gradle-tls
      hosts:
        - gradle.yourdomain.com